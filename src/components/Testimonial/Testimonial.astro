---
import { fetchTestimonios } from "../../pages/api/testimonios";

const testimonios = await fetchTestimonios(8);

const fallback = [
  { text: "Proceso claro y rápido, pude decidir el monto adecuado.", name: "Usuario verificado", profession: "Productor agropecuario", stars: 5 },
  { text: "La simulación me ayudó a planear mejor mis cuotas.", name: "Usuario verificado", profession: "Campesina", stars: 5 },
];

const list = testimonios.length > 0 ? testimonios : fallback;
---

<div class="container-fluid testimonial pb-5">
  <div class="container pb-5">
    <div class="text-center mx-auto pb-5" style="max-width: 800px">
      <h4 class="text-primary">Testimonios</h4>
      <h1 class="display-5 mb-4">Lo que dicen nuestros clientes</h1>
      <p class="mb-0">Comentarios reales escritos al simular/solicitar crédito.</p>
    </div>

    <div class="owl-carousel testimonial-carousel">
      {list.map((t, idx) => (
        <div class="testimonial-item" key={idx}>
          <div class="testimonial-quote-left"><i class="fas fa-quote-left fa-2x"></i></div>

          <div class="testimonial-text">
            <p class="mb-0">{t.text}</p>
          </div>

          <div class="testimonial-title">
            <div>
              <h4 class="mb-0">{t.name}</h4>
              <p class="mb-0">{t.profession}</p>
            </div>
            <div class="d-flex text-primary">
              {[...Array(t.stars)].map((_, i) => <i class="fas fa-star" key={i}></i>)}
            </div>
          </div>

          <div class="testimonial-quote-right"><i class="fas fa-quote-right fa-2x"></i></div>
        </div>
      ))}
    </div>
  </div>
</div>
